<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Bundle Minifier Test - Missing Files Scenario</title>
    
    <!-- External CSS Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    
    <!-- Local CSS Files (EXISTING) -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Local CSS Files (NON-EXISTENT) -->
    <link rel="stylesheet" href="css/missing-styles.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet" href="assets/animations.css">
    
    <!-- Inline Styles -->
    <style>
        /* Inline critical styles */
        .enhanced-card {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            box-shadow: 8px 8px 16px #d1d1d1, -8px -8px 16px #ffffff;
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1rem 0;
            transition: transform 0.3s ease;
        }
        
        .enhanced-card:hover {
            transform: translateY(-5px) scale(1.02);
        }
        
        .glow-button {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .glow-button:hover {
            box-shadow: 0 6px 25px rgba(78, 205, 196, 0.4);
            transform: translateY(-2px);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(78, 205, 196, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(78, 205, 196, 0); }
            100% { box-shadow: 0 0 0 0 rgba(78, 205, 196, 0); }
        }
        
        .chart-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .error-indicator {
            background: #ffebee;
            border: 2px solid #f44336;
            color: #c62828;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header>
        <h1>HTML Bundle Minifier Test - Missing Files Scenario</h1>
        <nav>
            <ul>
                <li><a href="#features">Features</a></li>
                <li><a href="#demo">Demo</a></li>
                <li><a href="#test-results">Test Results</a></li>
                <li><a href="#missing-files">Missing Files</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="features">
            <h2><i class="fas fa-tools"></i> Features Being Tested</h2>
            <div class="row">
                <div class="col-md-3">
                    <div class="enhanced-card">
                        <h3><i class="fab fa-css3-alt text-primary"></i> CSS Handling</h3>
                        <p>Tests inline styles, existing CSS files, missing CSS files, and external CDN libraries.</p>
                        <div class="badge bg-success">Enhanced</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="enhanced-card">
                        <h3><i class="fab fa-js-square text-warning"></i> JavaScript Processing</h3>
                        <p>Handles inline scripts, existing JS files, missing JS files, and external libraries.</p>
                        <div class="badge bg-info">Interactive</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="enhanced-card">
                        <h3><i class="fas fa-exclamation-triangle text-danger"></i> Error Handling</h3>
                        <p>Tests how the minifier handles missing or non-existent resource files.</p>
                        <div class="badge bg-danger">Critical</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="enhanced-card">
                        <h3><i class="fas fa-layer-group text-success"></i> Bundling</h3>
                        <p>Combines available resources while handling missing files gracefully.</p>
                        <div class="badge bg-secondary">Bundled</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="demo">
            <h2><i class="fas fa-play-circle"></i> Interactive Demo</h2>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="enhanced-card">
                            <h3><i class="fas fa-keyboard"></i> Text Processor</h3>
                            <div class="mb-3">
                                <label for="text-input" class="form-label">Enter some text:</label>
                                <input type="text" id="text-input" class="form-control" placeholder="Type something here...">
                            </div>
                            <button id="process-btn" class="glow-button pulse">
                                <i class="fas fa-magic"></i> Process Text
                            </button>
                            
                            <div class="mt-3">
                                <h4>Output:</h4>
                                <div id="output" class="alert alert-success">
                                    Your processed text will appear here...
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-6">
                        <div class="enhanced-card">
                            <h3><i class="fas fa-palette"></i> Dynamic Chart Demo</h3>
                            <div class="chart-container">
                                <canvas id="myChart" width="400" height="200"></canvas>
                            </div>
                            <button id="update-chart" class="btn btn-primary">
                                <i class="fas fa-refresh"></i> Update Chart
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="missing-files">
            <h2><i class="fas fa-exclamation-triangle"></i> Missing Files Test</h2>
            <div class="row">
                <div class="col-md-6">
                    <div class="enhanced-card">
                        <h3><i class="fab fa-css3-alt"></i> Missing CSS Files</h3>
                        <div class="error-indicator">
                            <i class="fas fa-times-circle"></i> The following CSS files are intentionally missing:
                        </div>
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between">
                                <span>css/missing-styles.css</span>
                                <span class="badge bg-danger">404</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>css/theme.css</span>
                                <span class="badge bg-danger">404</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>css/components.css</span>
                                <span class="badge bg-danger">404</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>styles/layout.css</span>
                                <span class="badge bg-danger">404</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>assets/animations.css</span>
                                <span class="badge bg-danger">404</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="enhanced-card">
                        <h3><i class="fab fa-js-square"></i> Missing JS Files</h3>
                        <div class="error-indicator">
                            <i class="fas fa-times-circle"></i> The following JS files are intentionally missing:
                        </div>
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between">
                                <span>js/missing-script.js</span>
                                <span class="badge bg-danger">404</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>js/components.js</span>
                                <span class="badge bg-danger">404</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>js/helpers.js</span>
                                <span class="badge bg-danger">404</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>scripts/analytics.js</span>
                                <span class="badge bg-danger">404</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>assets/vendor.js</span>
                                <span class="badge bg-danger">404</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="test-results">
            <h2><i class="fas fa-chart-line"></i> Test Results</h2>
            <div class="row">
                <div class="col-md-4">
                    <div class="enhanced-card text-center">
                        <i class="fas fa-file-code fa-2x text-primary mb-2"></i>
                        <h4>Original Size</h4>
                        <span id="original-size" class="h3 text-success">Calculating...</span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="enhanced-card text-center">
                        <i class="fas fa-compress fa-2x text-warning mb-2"></i>
                        <h4>Minified Size</h4>
                        <span id="minified-size" class="h3 text-info">Run minifier to see</span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="enhanced-card text-center">
                        <i class="fas fa-exclamation-triangle fa-2x text-danger mb-2"></i>
                        <h4>Missing Files</h4>
                        <span id="missing-count" class="h3 text-danger">10</span>
                    </div>
                </div>
            </div>
            
            <div class="enhanced-card mt-4">
                <h3><i class="fas fa-list-ol"></i> How to Test Missing Files:</h3>
                <ol class="list-group list-group-numbered">
                    <li class="list-group-item">Save this file as test-missing-files.html</li>
                    <li class="list-group-item">Run the minifier: <code class="bg-light p-1 rounded">npm run</code></li>
                    <li class="list-group-item">When prompted, enter the path to this file</li>
                    <li class="list-group-item">Check how the minifier handles missing file references</li>
                    <li class="list-group-item">Verify error handling and fallback behavior</li>
                    <li class="list-group-item">Compare output with the regular test file</li>
                </ol>
            </div>
        </section>
    </main>

    <footer class="bg-dark text-light py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-8">
                    <p><i class="fas fa-copyright"></i> 2025 HTML Bundle Minifier Test. Testing missing file scenarios.</p>
                </div>
                <div class="col-md-4">
                    <div class="d-flex flex-wrap gap-2">
                        <span class="badge bg-primary">External CSS: 2</span>
                        <span class="badge bg-success">Local CSS: 1</span>
                        <span class="badge bg-danger">Missing CSS: 5</span>
                        <span class="badge bg-primary">External JS: 2</span>
                        <span class="badge bg-success">Local JS: 1</span>
                        <span class="badge bg-danger">Missing JS: 5</span>
                        <span class="badge bg-secondary">Elements: <span id="element-count">0</span></span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- External JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Local JavaScript Files (EXISTING) -->
    <script src="js/utils.js"></script>
    
    <!-- Local JavaScript Files (NON-EXISTENT) -->
    <script src="js/missing-script.js"></script>
    <script src="js/components.js"></script>
    <script src="js/helpers.js"></script>
    <script src="scripts/analytics.js"></script>
    <script src="assets/vendor.js"></script>
    
    <!-- Inline JavaScript -->
    <script>
        // Inline critical JavaScript functionality
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Enhanced HTML Bundle Minifier Test Page (Missing Files) loaded!');
            console.warn('This test file includes references to missing CSS and JS files.');
            
            // Initialize text processor
            initializeTextProcessor();
            initializeChart();
            updateElementCount();
            displayPageSize();
            
            // Test for missing files
            checkMissingFiles();
        });

        // Simplified text processing
        function initializeTextProcessor() {
            const textInput = document.getElementById('text-input');
            const processBtn = document.getElementById('process-btn');
            const output = document.getElementById('output');
            
            if (processBtn && textInput && output) {
                processBtn.addEventListener('click', function() {
                    const inputText = textInput.value.trim();
                    
                    if (inputText === '') {
                        output.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Please enter some text to process!';
                        output.className = 'alert alert-warning';
                        return;
                    }
                    
                    // Process text: reverse, add timestamp, format
                    const reversed = inputText.split('').reverse().join('');
                    const timestamp = new Date().toLocaleTimeString();
                    const processed = `
                        <strong>Original:</strong> ${inputText}<br>
                        <strong>Reversed:</strong> ${reversed}<br>
                        <strong>Length:</strong> ${inputText.length} characters<br>
                        <strong>Processed at:</strong> ${timestamp}<br>
                        <em class="text-muted">Processed despite missing file references</em>
                    `;
                    
                    output.innerHTML = processed;
                    output.className = 'alert alert-success';
                    
                    // Add animation
                    output.style.transform = 'scale(1.05)';
                    setTimeout(() => {
                        output.style.transform = 'scale(1)';
                    }, 300);
                });
                
                textInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        processBtn.click();
                    }
                });
            }
        }

        // Chart initialization using Chart.js
        let myChart;
        function initializeChart() {
            const ctx = document.getElementById('myChart');
            if (ctx) {
                myChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Existing Files', 'Missing Files', 'External Files', 'Inline Code'],
                        datasets: [{
                            data: [2, 10, 4, 2],
                            backgroundColor: [
                                '#4CAF50',
                                '#F44336',
                                '#2196F3',
                                '#FF9800'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            },
                            title: {
                                display: true,
                                text: 'File Status Distribution'
                            }
                        }
                    }
                });
                
                // Update chart button
                const updateBtn = document.getElementById('update-chart');
                if (updateBtn) {
                    updateBtn.addEventListener('click', function() {
                        const newData = [
                            Math.floor(Math.random() * 5) + 1,
                            Math.floor(Math.random() * 15) + 5,
                            Math.floor(Math.random() * 8) + 2,
                            Math.floor(Math.random() * 5) + 1
                        ];
                        myChart.data.datasets[0].data = newData;
                        myChart.update();
                    });
                }
            }
        }

        // Element counter
        function updateElementCount() {
            const totalElements = document.querySelectorAll('*').length;
            const elementCountSpan = document.getElementById('element-count');
            if (elementCountSpan) {
                // Animate the count
                let current = 0;
                const increment = totalElements / 50;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= totalElements) {
                        elementCountSpan.textContent = totalElements;
                        clearInterval(timer);
                    } else {
                        elementCountSpan.textContent = Math.floor(current);
                    }
                }, 20);
            }
        }

        // Check for missing files (simulated)
        function checkMissingFiles() {
            console.log('Checking for missing files...');
            
            const missingCssFiles = [
                'css/missing-styles.css',
                'css/theme.css', 
                'css/components.css',
                'styles/layout.css',
                'assets/animations.css'
            ];
            
            const missingJsFiles = [
                'js/missing-script.js',
                'js/components.js',
                'js/helpers.js',
                'scripts/analytics.js',
                'assets/vendor.js'
            ];
            
            console.warn('Missing CSS files:', missingCssFiles);
            console.warn('Missing JS files:', missingJsFiles);
            
            // Update missing count display
            const missingCountElement = document.getElementById('missing-count');
            if (missingCountElement) {
                const totalMissing = missingCssFiles.length + missingJsFiles.length;
                missingCountElement.textContent = totalMissing;
            }
            
            // Add warning to console
            console.log('%cThis is intentional for testing purposes!', 'color: orange; font-weight: bold;');
        }

        // Function that would be in missing-script.js (but file doesn't exist)
        function missingFunction() {
            console.log('This function should be in a missing file');
        }
        
        // Try to call a function that should be in utils.js (this one exists)
        setTimeout(() => {
            if (typeof displayPageSize === 'function') {
                console.log('✓ utils.js loaded successfully');
            } else {
                console.error('✗ utils.js failed to load or function missing');
            }
        }, 1000);
    </script>
</body>
</html>
